@* @model Movix.Domain.Entities.Filme *@
@* @{ *@
@*     ViewData["Title"] = "Excluir Filme"; *@
@*     bool canDelete = User.IsInRole("Admin") || User.IsInRole("ADMIN") || User.IsInRole("Administrador"); *@
@* } *@
@* <h2 class="mb-3">Excluir Filme</h2> *@

@* @if (!canDelete) *@
@* { *@
@*     <div class="alert alert-warning">Você não tem permissão para excluir. Apenas administradores podem executar esta ação.</div> *@
@*     <a class="btn btn-secondary" asp-action="Index">Voltar</a> *@
@* } *@
@* else *@
@* { *@
@*     <div class="alert alert-danger"> *@
@*         Tem certeza que deseja excluir o filme <strong>@Model.Titulo</strong> (@Model.Ano)? *@
@*     </div> *@
@*     <dl class="row"> *@
@*         <dt class="col-sm-2">Gênero</dt> *@
@*         <dd class="col-sm-10">@Model.Genero?.Nome</dd> *@
@*         <dt class="col-sm-2">Classificação</dt> *@
@*         <dd class="col-sm-10">@Model.Classificacao?.Nome</dd> *@
@*     </dl> *@
@*     <form asp-action="Delete" method="post"> *@
@*         @Html.AntiForgeryToken() *@
@*         <input type="hidden" name="id" value="@Model.Id" /> *@
@*         <button class="btn btn-danger" type="submit">Excluir</button> *@
@*         <a class="btn btn-secondary ms-2" asp-action="Index">Cancelar</a> *@
@*     </form> *@
@* } *@









@model Movix.Domain.Entities.Filme

@{
    ViewData["Title"] = "Excluir Filme";
    bool canDelete = User.IsInRole("Admin") || User.IsInRole("ADMIN") || User.IsInRole("Administrador");
}

<div class="container" style="padding-top: 120px; max-width: 850px;">

    <div class="card bg-dark text-white border-0 shadow-lg rounded-4 mb-4">
        <div class="card-body px-5 py-4">

            <h6 class="text-danger text-uppercase fw-bold small mb-1" style="letter-spacing: 2px;">
                Administração
            </h6>

            <h1 class="fw-bold mb-4">Excluir Filme</h1>

            @if (!canDelete)
            {
                <div class="alert alert-warning shadow-sm rounded-3">
                    <i class="bi bi-exclamation-triangle me-2"></i>
                    Você não tem permissão para excluir. Apenas administradores podem executar esta ação.
                </div>

                <a class="btn btn-outline-secondary px-4 mt-2" asp-action="Index">
                    <i class="bi bi-arrow-left"></i> Voltar
                </a>
            }
            else
            {
                <!-- Mensagem de confirmação -->
                <div class="alert alert-danger shadow-sm rounded-3">
                    <i class="bi bi-trash3-fill me-2"></i>
                    Tem certeza que deseja excluir o filme
                    <strong>@Model.Titulo</strong> (@Model.Ano)?
                </div>

                <!-- Informações do Filme -->
                <div class="card bg-black border border-secondary rounded-4 shadow-sm mb-4">
                    <div class="card-body">

                        <dl class="row mb-0">
                            <dt class="col-sm-3 fw-semibold text-info">Gênero</dt>
                            <dd class="col-sm-9">@Model.Genero?.Nome</dd>

                            <dt class="col-sm-3 fw-semibold text-info">Classificação</dt>
                            <dd class="col-sm-9">@Model.Classificacao?.Nome</dd>
                        </dl>

                        @* Preview se tiver imagem *@
                        @if (!string.IsNullOrWhiteSpace(Model?.ImagemCapaUrl))
                        {
                            <div class="text-center mt-4">
                                <img src="@Model.ImagemCapaUrl"
                                     alt="Capa"
                                     class="rounded-4 shadow"
                                     style="max-width: 200px; border: 2px solid rgba(255,255,255,0.12);" />
                            </div>
                        }
                    </div>
                </div>

                <!-- Botões -->
                <form asp-action="Delete" method="post">
                    @Html.AntiForgeryToken()
                    <input type="hidden" name="id" value="@Model.Id" />

                    <div class="d-flex gap-3">

                        <button class="btn btn-danger px-4 fw-bold" type="submit">
                            <i class="bi bi-trash3-fill me-1"></i> Excluir
                        </button>

                        <a class="btn btn-outline-secondary px-4" asp-action="Index">
                            <i class="bi bi-x-circle me-1"></i> Cancelar
                        </a>

                    </div>
                </form>
            }

        </div>
    </div>

</div>

